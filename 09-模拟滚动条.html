<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
        * {
            padding: 0;
            margin: 0;
        }
        body {
            height: 5000px;
        }
        .box {
            width: 280px;
            height: 400px;
            position: relative;
            margin: 100px auto;
            /*overflow: hidden;*/
            border: 1px solid red;
        }
        .content {
            width: 240px;
            padding: 10px;
            position: absolute;
            top: 0;
            left: 0;
            text-align: center;
            font: 21px/30px "simsun";
            background-color: #8dfffa;
        }
        .scrollBox {
            width: 20px;
            height: 400px;
            position: absolute;
            top: 0;
            right: 0;
            background-color: #ccc;
        }
        .bar {
            width: 20px;
            cursor: pointer;
            position: absolute;
            top: 0;
            border-radius: 10px;
            background-color: red;
        }
    </style>
    <script src="jquery-1.11.1-min.js">

    </script>
    <script>
        window.onload=function(){
//            模拟滚动条
//            当content的内容高度等于box时，不显示滚动条
            var box=document.getElementById("box");
            var content=box.firstElementChild||box.firstChild;
            var scrollBox=content.nextElementSibling||content.nextSibling;
            var bar=scrollBox.children[0];

//            bar高/scroll的高=box的高/content的高
            var bili1=box.offsetHeight/content.clientHeight;

            if(content.clientHeight>box.offsetHeight){
//                显示滚动条
                bar.style.height=bili1*scrollBox.offsetHeight+"px";
            }else{
                return;
            }
//            第二步：当点击滚轮时
//            滚轮移动时，鼠标移动的距离和content移动距离成正比
            bar.onmousedown=function(event){
                event=event||window.event;
//                鼠标移动前的距离
                var prePageY=event.pageY||event.clientY+scroll().top;
//                bar没有移动之前的距离
                var preBar=bar.offsetTop;
//                在鼠标移动之前，就获得了鼠标
//                当鼠标移动时
                document.onmousemove=function(event){
//                    获取鼠标移动后的距离
                    var pagey=event.pageY||event.clientY+scroll().top;
                    var y=pagey-prePageY;
                    var barY=bar.offsetTop;
//                    给bar的移动范围赋值
                    if(y<0){
                        y=0;
                    }
                    if(y>scrollBox.offsetHeight-bar.offsetHeight){
                        y=scrollBox.offsetHeight-bar.offsetHeight;
                    }
//                    将鼠标移动的位置给bar
                    bar.style.top=y+"px";
                    var barMove=barY-preBar;
//                    content移动的距离/bar移动的距离=（content-box）/（scroll-bar）
                    var bili2=(content.clientHeight-box.offsetHeight)/(scrollBox.offsetHeight-bar.offsetHeight);
                    var contentMove=bili2*barMove;
//                    将conten移动的距离给了content
                    content.style.top=-contentMove+"px";
                }

            }
            document.onmouseup=function(){
                document.onmousemove=null;
            }

//            bug1:当鼠标弹起，第二次点击滑块时，内容到达底部
        }
    </script>
</head>
<body>
<div class="box" id="box">
    <div class="content">
        水垢何曾相受，细看两俱无有，寄语揩背人，尽日劳君挥肘，轻手轻手，居士本来无垢...<br>
        水垢何曾相受，细看两俱无有，寄语揩背人，尽日劳君挥肘，轻手轻手，居士本来无垢...<br>
        水垢何曾相受，细看两俱无有，寄语揩背人，尽日劳君挥肘，轻手轻手，居士本来无垢...<br>
        水垢何曾相受，细看两俱无有，寄语揩背人，尽日劳君挥肘，轻手轻手，居士本来无垢...<br>
        水垢何曾相受，细看两俱无有，寄语揩背人，尽日劳君挥肘，轻手轻手，居士本来无垢...<br>
        水垢何曾相受，细看两俱无有，寄语揩背人，尽日劳君挥肘，轻手轻手，居士本来无垢...<br>
        水垢何曾相受，细看两俱无有，寄语揩背人，尽日劳君挥肘，轻手轻手，居士本来无垢...<br>
        水垢何曾相受，细看两俱无有，寄语揩背人，尽日劳君挥肘，轻手轻手，居士本来无垢...<br>
        水垢何曾相受，细看两俱无有，寄语揩背人，尽日劳君挥肘，轻手轻手，居士本来无垢...<br>
        水垢何曾相受，细看两俱无有，寄语揩背人，尽日劳君挥肘，轻手轻手，居士本来无垢...<br>
        水垢何曾相受，细看两俱无有，寄语揩背人，尽日劳君挥肘，轻手轻手，居士本来无垢...<br>
        水垢何曾相受，细看两俱无有，寄语揩背人，尽日劳君挥肘，轻手轻手，居士本来无垢...<br>
        水垢何曾相受，细看两俱无有，寄语揩背人，尽日劳君挥肘，轻手轻手，居士本来无垢...<br>
        水垢何曾相受，细看两俱无有，寄语揩背人，尽日劳君挥肘，轻手轻手，居士本来无垢...<br>
        水垢何曾相受，细看两俱无有，寄语揩背人，尽日劳君挥肘，轻手轻手，居士本来无垢...<br>
        水垢何曾相受，细看两俱无有，寄语揩背人，尽日劳君挥肘，轻手轻手，居士本来无垢...<br>
        水垢何曾相受，细看两俱无有，寄语揩背人，尽日劳君挥肘，轻手轻手，居士本来无垢...<br>
        水垢何曾相受，细看两俱无有，寄语揩背人，尽日劳君挥肘，轻手轻手，居士本来无垢...<br>
        水垢何曾相受，细看两俱无有，寄语揩背人，尽日劳君挥肘，轻手轻手，居士本来无垢...<br>
        水垢何曾相受，细看两俱无有，寄语揩背人，尽日劳君挥肘，轻手轻手，居士本来无垢...<br>
        水垢何曾相受，细看两俱无有，寄语揩背人，尽日劳君挥肘，轻手轻手，居士本来无垢...<br>
        水垢何曾相受，细看两俱无有，寄语揩背人，尽日劳君挥肘，轻手轻手，居士本来无垢...<br>
        水垢何曾相受，细看两俱无有，寄语揩背人，尽日劳君挥肘，轻手轻手，居士本来无垢...<br>
        ------end-------
    </div>
    <div class="scrollBox">
        <div class="bar"></div>
    </div>
</div>
</body>
</html>